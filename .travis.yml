language: generic

env:
  matrix:
    - EMACS=emacs24
    - EMACS=emacs25
    - EMACS=emacs26
    - EMACS=emacs-snapshot

matrix:
  allow_failures:
    - env: EMACS=emacs-snapshot

before_install:
  - if [ "$EMACS"= "emacs24" ]; then
      sudo apt-get -qq update &&
      sudo apt-get -qq -f install &&
      sudo apt-get -qq install emacs24 emacs24-el curl org-mode;
    fi
  - if [ "$EMACS" = "emacs25" ]; then
      sudo add-apt-repository -y ppa:cassou/emacs &&
      sudo apt-get -qq update &&
      sudo apt-get -qq -f install &&
      sudo apt-get -qq install emacs25 emacs25-el;
    fi
  - if [ "$EMACS" = "emacs26" ]; then
      sudo add-apt-repository -y ppa:cassou/emacs &&
      sudo apt-get -qq update &&
      sudo apt-get -qq -f install &&
      sudo apt-get -qq install emacs26 emacs26-el;
    fi
  - if [ "$EMACS" = "emacs-snapshot" ]; then
      sudo add-apt-repository -y ppa:ubuntu-elisp/ppa &&
      sudo apt-get -qq update &&
      sudo apt-get -qq -f install &&
      sudo apt-get -qq install emacs-snapshot emacs-snapshot-el;
    fi

script: make test
